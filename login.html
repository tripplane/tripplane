<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="stylesheet" href="pagestyle.css">
    <link rel="stylesheet" href="login.css">
    <title>Trip Plan</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>
<body>
    <div class="topnav" id="myTopnav">
        <img class="logo" src="IMG_0782.png" alt="logo">
        <div class="gap"><a></a></div>
        <a href="homepage.html">דף הבית</a>
        <a href="therapy.html">סיורים</a>
        <a href="readview.html">אודות</a>
        <a href="store.html">חנות</a>
        <a href="contact.html">צרו קשר</a>
        <a class="active" href="login.html">התחבר</a>
        <a href="javascript:void(0);" class="icon" onclick="myFunction()"><i class="fa fa-bars"></i>
        </a>
      </div>


    <center>
      <div class="info">
          <h1 class="header" >התחבר אלינו!</h1>
          <p class="und_header">התחבר לאתר על מנת לקבל אינפורמצייה ייחודית רק לך!</p>
      </div>
    </center>

      <center>
        <div id="con" class="container">
          <label for="uname"><b>שם משתמש</b></label>
          <input id="usr" type="text" placeholder="Enter Username" name="uname" required>
      
          <label for="psw"><b>סיסמא</b></label>
          <input id="psw" type="password" placeholder="Enter Password" name="psw" required>
      
          <button onclick="submit()" type="submit">התחבר</button>
          <label>
            <input type="checkbox" checked="checked" name="remember"> זכור אותי
          </label>
        </div>
      </form>
    </center>


   <center>
    <div id="wrong" class="wrong">
        <p>לא ניתן להתחבר שם משתמש או סיסמא שגויים</p>
    </div>
</center>


<center>
    <div id="pas" class="pass">
        <p id="content">התחברת בהצלחה</p>
    </div>
</center>

      <script src="homepage.js"></script>
    
      


      <script>
          function submit(){
            let connected;  // Check status of connection
            const xhttp = new XMLHttpRequest(); //create new object of Ajax
            xhttp.onload = function() {
            console.log(this.responseText);  //get the respone from the server
            const respone = JSON.parse(this.responseText);
            console.log(respone);
            var x = document.getElementById("usr").value; //get elements from user
            var y = document.getElementById("psw").value;
            for(let i = 0;i<respone.length;i++){   //verifying the inputs agaunst the server respone
              if(respone[i].user == x && respone[i].password==y){
                 document.getElementById("con").style.visibility="hidden";
                 document.getElementById("pas").innerHTML+= x;
                 document.getElementById("pas").style.visibility="visible";
                 connected=true;
              }
            }
            if(connected!=true){ //if the arguments dont match there will display message
                document.getElementById("wrong").style.visibility="visible";
            }
            }
            xhttp.open("GET", "http://localhost:3000/login", true);  //Ajax GET request send
            xhttp.send(); //send
          }
      </script>
</body>
</html>